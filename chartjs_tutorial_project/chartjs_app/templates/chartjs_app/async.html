<!DOCTYPE html>
<!--ajax_app/templates/simple_page.html-->
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>jQuery Ajax Method</title>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" id="a"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script id="b">
      $(function () {
        $("#requestBtn").on("click", function () {
          $.ajax({
            url: "{% url 'chartjs_app:ajax_test'%}",
            data: { name: "홍길동" },
            method: "POST",
            dataType: "json",
          })
            .done(function (response) {
              alert("요청 성공");
              $("#reply").html(response["hello"]);
              console.log('hello')
            })
            .fail(function () {
              alert("요청 실패");
            })
            .always(function () {
              alert("요청 완료");
                var chart = document.getElementById('chart').innerText
                console.log(chart)

                $(document).ready(function(){
                alert('hi - load');
                eval(chart)
                });
            });
        });
      });
    </script>
  </head>

  <body>
    <h1>$.ajax() 메소드</h1>
    <button id="requestBtn">$.ajax() 메소드 실행</button>
    <div id="reply"></div>
    >
    <p id="text"></p>
  </body>